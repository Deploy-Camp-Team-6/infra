---
# Domain Configuration
base_domain: "fraudai.cloud"
traefik_domain: "traefik.{{ base_domain }}"
portainer_domain: "portainer.{{ base_domain }}"
whoami_domain: "whoami.{{ base_domain }}"
mlops_domain: "mlflow.{{ base_domain }}"
minio_domain: "minio.{{ base_domain }}"
redis_domain: "redis.{{ base_domain }}"

# System Configuration
timezone: "UTC"
ntp_servers:
  - "pool.ntp.org"
  - "time.cloudflare.com"

# Security Configuration
ssh_port: 22
allowed_ssh_users:
  - ubuntu
  - deploy
fail2ban_enabled: true

# UFW Firewall Rules
ufw_rules:
  - { rule: 'allow', port: '{{ ssh_port }}', proto: 'tcp' }
  - { rule: 'allow', port: '80', proto: 'tcp' }
  - { rule: 'allow', port: '443', proto: 'tcp' }
  - { rule: 'allow', port: '2377', proto: 'tcp' }  # Docker Swarm
  - { rule: 'allow', port: '7946', proto: 'tcp' }  # Docker Swarm
  - { rule: 'allow', port: '7946', proto: 'udp' }  # Docker Swarm
  - { rule: 'allow', port: '4789', proto: 'udp' }  # Docker Overlay

# Docker Configuration
docker_edition: ce
docker_package: "docker-{{ docker_edition }}"
docker_users:
  - ubuntu
  - deploy

# Docker Swarm Configuration
docker_swarm_addr: "{{ ansible_default_ipv4.address }}"
docker_swarm_port: 2377

# Directory Structure
docker_dir: "/opt/docker"
docker_compose_dir: "{{ docker_dir }}/compose"
docker_secrets_dir: "{{ docker_dir }}/secrets"
docker_data_dir: "{{ docker_dir }}/data"

# Traefik Configuration
traefik_version: "v3.1.2"
traefik_log_level: "INFO"
acme_email: "bensatriya3@gmail.com"
traefik_admin_password: "{{ traefik_admin_password }}"

# Image versions
mlflow_image: "ghcr.io/mlflow/mlflow"
mlflow_version: "v2.10.2"
postgres_image: "postgres"
postgres_version: "16"
minio_image: "minio/minio"
minio_version: "RELEASE.2025-02-18T16-25-55Z"

# MLflow configuration
mlflow_backend_store_uri: "postgresql://mlflow:{{ mlflow_postgres_password }}@postgres:5432/mlflow"
mlflow_default_artifact_root: "s3://mlflow/"

# MinIO configuration
minio_root_user: "{{ minio_root_user }}"
minio_root_password: "{{ minio_root_password }}"
minio_bucket_name: "mlflow"

# PostgreSQL configuration
postgres_user: "mlflow"
postgres_password: "{{ mlflow_postgres_password }}"
postgres_db: "mlflow"
postgres_initdb_dir: "{{ docker_compose_dir }}/postgresql-initdb"

# Shared PostgreSQL database
postgres_host: "postgres"
shared_postgres_user: "shared_user"
shared_postgres_db: "shared_db"
shared_postgres_password: "{{ shared_postgres_password }}"

# Portainer Configuration
portainer_version: "latest"

# Redis Configuration
redis_version: "7"
redis_password: "{{ redis_password }}"
redis_insight_version: "latest"

# Logging Configuration
log_driver: "json-file"
log_max_size: "10m"
log_max_file: "3"
# Monitoring Configuration
grafana_domain: "grafana.{{ base_domain }}"
grafana_image: "grafana/grafana"
grafana_version: "11.2.0"
loki_image: "grafana/loki"
loki_version: "3.0.0"
alloy_image: "grafana/alloy"
alloy_version: "latest"
grafana_admin_password: "{{ grafana_admin_password }}"
